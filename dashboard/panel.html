<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        .monospace {
            font-family: monospace;
        }
    </style>
</head>
<body>
    <p>
        <h2>CURRENT EVENT</h2>
        <label>Name</label><br />
        <input id="eventNameInput" type="text"></input><br />
        <button id="eventNameSubmitButton">Edit</button>
    </p>

    <p>
        <h2>COUNTDOWN</h2>
        <input id="countdownHourInput" type="text"></input><br />
        <input id="countdownMinuteInput" type="text"></input><br />
        <input id="countdownSecondInput" type="text"></input><br />
        <button id="countdownStartButton">Start</button>
        <button id="countdownPauseButton">Pause</button>
        <button id="countdownResetButton">Reset</button>
    </p>

    <script>
        const eventNameInput = document.querySelector('#eventNameInput');
        const eventNameSubmitButton = document.querySelector('#eventNameSubmitButton');
        const countdownHourInput = document.querySelector('#countdownHourInput');
        const countdownMinuteInput = document.querySelector('#countdownMinuteInput');
        const countdownSecondInput = document.querySelector('#countdownSecondInput');
        const countdownStartButton = document.querySelector('#countdownStartButton');

        const eventNameReplicant = nodecg.Replicant(
            "eventName",
            {defaultValue: ""}
        );
        const contdownReplicant = nodecg.Replicant(
            "countdownTimestamp", { defaultValue: -1 }
        );

        eventNameReplicant.on('change', (newValue, oldValue) => {
            eventNameInput.value = newValue;
        });

        eventNameSubmitButton.onclick = () => {
            eventNameReplicant.value = eventNameInput.value;
        };

        countdownResetButton.onclick = () => {
            nodecg.sendMessage("countdownReset", {
                newTimelimit: parseInt(countdownHourInput.value) * 3600 + parseInt(countdownMinuteInput.value) * 60 + parseInt(countdownSecondInput.value)
            });
        };

        countdownStartButton.onclick = () => {
            nodecg.sendMessage("countdownStart");
        };

        countdownPauseButton.onclick = () => {
            nodecg.sendMessage("countdownPause");
        };
    </script>
</body>
</html>
